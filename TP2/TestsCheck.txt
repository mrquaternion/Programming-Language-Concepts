-- Test des constantes
check True [] (Lnum 42) -- Résultat attendu : Tnum
check True [] (Lbool True) -- Résultat attendu : Tbool

-- Test des variables
check True [("x", Tnum)] (Lvar "x") -- Résultat attendu : Tnum
check True [("y", Tbool)] (Lvar "y") -- Résultat attendu : Tbool
check True [] (Lvar "z") -- Résultat attendu : Terror "Variable inconnue: z"

-- Test des annotations de type
check True [] (Ltype (Lnum 42) Tnum) -- Résultat attendu : Tnum
check True [] (Ltype (Lnum 42) Tbool) -- Résultat attendu : Terror "Type mismatch: attendu Tbool, obtenu Tnum"

-- Test des expressions conditionnelles
check True [] (Ltest (Lbool True) (Lnum 42) (Lnum 0)) -- Résultat attendu : Tnum
check True [] (Ltest (Lbool True) (Lbool True) (Lbool False)) -- Résultat attendu : Tbool
check True [] (Ltest (Lnum 42) (Lnum 1) (Lnum 2)) -- Résultat attendu : Terror "Condition de if n'est pas un booléen"

-- Test des appels de fonction (avec `toTEnv env0`)
check True (toTEnv env0) (Lsend (Lvar "+") [Lnum 10, Lnum 5]) -- Résultat attendu : Tnum
check True (toTEnv env0) (Lsend (Lvar "+") [Lnum 10, Lbool True]) -- Résultat attendu : Terror "Types des arguments incorrects dans Lsend"
check True (toTEnv env0) (Lsend (Lvar "notAFunc") [Lnum 1]) -- Résultat attendu : Terror "Expression appelee n'est pas une fonction"

-- Test des déclarations locales
check True [] (Llet "x" (Lnum 42) (Lvar "x")) -- Résultat attendu : Tnum
check True [] (Llet "x" (Lbool True) (Ltest (Lvar "x") (Lnum 1) (Lnum 0))) -- Résultat attendu : Tnum
check True (toTEnv env0) (Llet "x" (Lnum 42) (Llet "y" (Lnum 10) (Lsend (Lvar "+") [Lvar "x", Lvar "y"]))) -- Résultat attendu : Tnum

-- Test des déclarations récursives (avec `toTEnv env0`)
check True (toTEnv env0) (Lfix [("fact", Lfob [("n", Tnum)] (Ltest (Lsend (Lvar ">") [Lvar "n", Lnum 0]) (Lsend (Lvar "*") [Lvar "n", Lsend (Lvar "fact") [Lsend (Lvar "-") [Lvar "n", Lnum 1]]]) (Lnum 1)))] (Lvar "fact")) -- Résultat attendu : Tfob [Tnum] Tnum
check True [] (Lfix [("id", Lfob [("x", Tnum)] (Lvar "x"))] (Lvar "id")) -- Résultat attendu : Tfob [Tnum] Tnum
check True [] (Lfix [("unknown", Lfob [("x", Tnum)] (Lsend (Lvar "unknown") [Lvar "x"]))] (Lvar "unknown")) -- Résultat attendu : Terror "Erreur dans les déclarations récursives"

-- Test des déclarations de fonction
check True [] (Lfob [("x", Tnum)] (Lvar "x")) -- Résultat attendu : Tfob [Tnum] Tnum
check True [] (Lfob [("x", Tbool), ("y", Tnum)] (Ltest (Lvar "x") (Lvar "y") (Lnum 0))) -- Résultat attendu : Tfob [Tbool, Tnum] Tnum

-- Test avancé avec let imbriqué et opérateurs (avec `toTEnv env0`)
check True (toTEnv env0) (Llet "x" (Lnum 42) (Llet "y" (Lnum 10) (Lsend (Lvar "+") [Lvar "x", Lvar "y"]))) -- Résultat attendu : Tnum
